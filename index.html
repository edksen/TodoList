<!DOCTYPE html>
<html>
<head>
<title>My ToDo List</title>
<link rel="stylesheet" href="./styles/main_style.css">
<link rel="stylesheet" href="./styles/modal_view.css">
</head>
<body>
    <h1 class="mainPageText">ToDo List</h1>
    <p class="mainPageText">Upcomming Events</p>
</body>
<script type="module">
    import * as ToDoDataModule from "/modules/todo_data.js"
    import * as ModalModule from "/modules/modal_view.js"

    let toDosSet = new Array();
    ToDoDataModule.toDoList.initializeList(document.body);



    const createTaskButton = document.createElement("button");
    createTaskButton.textContent = "Add task";
    createTaskButton.onclick = showTaskModule;
    document.body.insertBefore(createTaskButton, document.getElementsByTagName("h1")[0]);


    async function showTaskModule() {
        let result = await ModalModule.modalViewsController.showModalView("Add Task", [new ModalModule.FieldParameter(ModalModule.FieldTypes.Date, ToDoDataModule.ModalViewFieldNames.Deadline), new ModalModule.FieldParameter(ModalModule.FieldTypes.Text, ToDoDataModule.ModalViewFieldNames.Task)]);
        if(result)
            ToDoDataModule.toDoList.addTasksToList(ToDoDataModule.ToDoData.fromModalViewResult(result));
    }
</script>
</html>